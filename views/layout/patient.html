<html>
    <head>
        <title>RROE</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/application.css') }}">
        <style>

        </style>
    </head>
    <body>
        <div class="mainDiv">
            {% block body %}
            {% endblock %}
        </div>
        <div class="nvBar footer" id="navFooter" style="text-align: left;">
            <a href="/"><button class="nvButton" style="float:right;">Finish</button></a>
            <a href="#openModal"><button class="nvButton" style="float:right;">New Test</button></a>
        </div>
    <div id="openModal" class="modalDialog">
            <div>
                <div style="height: 17%;text-align: center; border: 1px solid silver; padding:5px; border-radius: 5px 5px 0px 0px">
                    <span  style="font-weight:bold;font-size: 20pt;">Laboratory Test Order</span><hr/>
                    <table style="width:80%;">
                        <tr>
                            <td >Patient</td><td>:</td>
                            <td>{{ patient['name']}}</td>
                        </tr>
                        <tr>
                            <td >Ordered By</td><td>:</td>
                            <td>{{current_user['name']}}</td>
                        </tr>
                        <tr>
                            <td>Order Date</td><td>:</td>
                            <td>{{now}}</td>
                        </tr>
                        <tr>
                            <td >Test</td><td>:</td>
                            <td>&nbsp;</td>
                        </tr>
                    </table>
                </div>
                <div style="height: 70%; overflow-y: auto;overflow-x: hidden;">
                    <form id="regForm" action="/action_page.php">
                        <!-- One "tab" for each step in the form: -->
                        <div class="tab">
                            <ul>
                                <div style="display: table-row;">
                                    <div style='display: table-cell; vertical-align: center;'>
                                        <li><input type='radio' id='Ascitic Fluid' name='specimen_type'><label for='Ascitic Fluid'>Ascitic Fluid</label><div class='check'></div></li>
                                    </div>
                                    <div style='display: table-cell;'>
                                        <li><input type='radio' id='Blood' name='selector'><label for='Blood'>Blood</label><div class='check'></div></li>
                                    </div>
                                </div>
                                <div style="display: table-row;">
                                    <div style='display: table-cell;'>
                                        <li><input type='radio' id='CSF' name='selector'><label for='CSF'>CSF</label><div class='check'></div></li>
                                    </div>
                                    <div style='display: table-cell;'>
                                        <li><input type='radio' id='DBS' name='selector'><label for='DBS'>DBS</label><div class='check'></div></li>
                                    </div>
                                </div>
                                <div style="display: table-row;">
                                    <div style='display: table-cell;'>
                                        <li><input type='radio' id='HVS' name='selector'><label for='HVS'>HVS</label><div class='check'></div></li>
                                    </div>
                                    <div style='display: table-cell;'>
                                        <li><input type='radio' id='Pericardial Fluid' name='selector'><label for='Pericardial Fluid'>Pericardial Fluid</label><div class='check'></div></li>
                                    </div>
                                </div>
                                <div style="display: table-row;">
                                    <div style='display: table-cell;'>
                                        <li><input type='radio' id='Peritoneal Fluid' name='selector'><label for='Peritoneal Fluid'>Peritoneal Fluid</label><div class='check'></div></li>
                                    </div>
                                    <div style='display: table-cell;'>
                                        <li><input type='radio' id='Pleural Fluid' name='selector'><label for='Pleural Fluid'>Pleural Fluid</label><div class='check'></div></li>
                                    </div>
                                </div>
                                <div style="display: table-row;">
                                    <div style='display: table-cell;'>
                                        <li><input type='radio' id='Pus' name='selector'><label for='Pus'>Pus</label><div class='check'></div></li>
                                    </div>
                                    <div style='display: table-cell;'>
                                        <li><input type='radio' id='Semen' name='selector'><label for='Semen'>Semen</label><div class='check'></div></li>
                                    </div>
                                </div>
                                <div style="display: table-row;">
                                    <div style='display: table-cell;'>
                                        <li><input type='radio' id='Sputum' name='selector'><label for='Sputum'>Sputum</label><div class='check'></div></li>
                                    </div>
                                    <div style='display: table-cell; '>
                                        <li><input type='radio' id='Stool' name='selector'><label for='Stool'>Stool</label><div class='check'></div></li>
                                    </div>
                                </div>
                                <div style="display: table-row;">
                                    <div style='display: table-cell;'>
                                        <li><input type='radio' id='Synovial Fluid' name='selector'><label for='Synovial Fluid'>Synovial Fluid</label><div class='check'></div></li>
                                    </div>
                                    <div style='display: table-cell;'>
                                        <li><input type='radio' id='Tissue biopsy' name='selector'><label for='Tissue biopsy'>Tissue biopsy</label><div class='check'></div></li>
                                    </div>
                                </div>
                                <div style="display: table-row;">
                                    <div style='display: table-cell;'>
                                        <li><input type='radio' id='Urine' name='selector'><label for='Urine'>Urine</label><div class='check'></div></li>
                                    </div>
                                    <div style='display: table-cell;'>
                                        &nbsp;
                                    </div>
                                </div>
                            </ul>
                        </div>
                        <div class="tab">
                               <ul>
                                    <div style="display: table-row;">
                                          <div style="display: table-cell;">
                                              <li>
                                                  <input type="checkbox" id="pizza" name="selector">
                                                  <label for="pizza">Pizza</label>
                                                  <div class="select"></div>
                                              </li>
                                          </div>
                                          <div style="display: table-cell;">
                                              <li>
                                                  <input type="checkbox" id="cake" name="selector">
                                                  <label for="cake">Cake</label>
                                                  <div class="select"><div class="inside"></div></div>
                                                </li>
                                          </div>
                                    </div>
                            </ul>
                        </div>
                        <div class="tab">
                            <p><input placeholder="Clinical history" multiple oninput="this.className = ''" name="history"></p>
                        </div>
                        <div class="tab">
                            <ul>
                                <li>
                                    <input type="radio" id="routine" name="priority" checked>
                                    <label for="routine">Routine</label>
                                    <div class="check"></div>
                                </li>
                                <li>
                                     <input type="radio" id="stat" name="priority" checked>
                                    <label for="stat">Stat</label>
                                    <div class="check"></div>
                                </li>
                            </ul>
                        </div>
                    </form>
                </div>
                <div style="height: 12%; margin-top: 1vh;border: 1px solid silver; padding:10px; border-radius: 0px 0px 5px 5px">
                    <table style="width:100%;">
                        <tr>
                            <td>
                                <a href="#close" title="Close" ><button type="button" class="modalNVButton red">Cancel</button></a>
                            </td>
                            <td style="text-align: center;">
                                <span class="step"></span>
                                <span class="step"></span>
                                <span class="step"></span>
                                <span class="step"></span>
                            </td>
                            <td style="text-align: right">
                                <button type="button" id="prevBtn" class="modalNVButton" onclick="nextPrev(-1)">Previous</button>
                                <button type="button" id="nextBtn" class="modalNVButton green" onclick="nextPrev(1)">Next</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </body>

<script>
var currentTab = 0; // Current tab is set to be the first tab (0)
showTab(currentTab); // Display the current tab

function showTab(n) {
  // This function will display the specified tab of the form...
  var x = document.getElementsByClassName("tab");
  x[n].style.display = "block";
  //... and fix the Previous/Next buttons:
  if (n == 0) {
    document.getElementById("prevBtn").style.display = "none";
  } else {
    document.getElementById("prevBtn").style.display = "inline";
  }
  if (n == (x.length - 1)) {
    document.getElementById("nextBtn").innerHTML = "Submit";
  } else {
    document.getElementById("nextBtn").innerHTML = "Next";
  }
  //... and run a function that will display the correct step indicator:
  fixStepIndicator(n)
}

function nextPrev(n) {
  // This function will figure out which tab to display
  var x = document.getElementsByClassName("tab");
  // Exit the function if any field in the current tab is invalid:
  if (n == 1 && !validateForm()) return false;
  // Hide the current tab:
  x[currentTab].style.display = "none";
  // Increase or decrease the current tab by 1:
  currentTab = currentTab + n;
  // if you have reached the end of the form...
  if (currentTab >= x.length) {
    // ... the form gets submitted:
    document.getElementById("regForm").submit();
    return false;
  }
  // Otherwise, display the correct tab:
  showTab(currentTab);
}

function validateForm() {
  // This function deals with validation of the form fields
  var x, y, i, valid = true;
  x = document.getElementsByClassName("tab");
  y = x[currentTab].getElementsByTagName("input");
  // A loop that checks every input field in the current tab:
  for (i = 0; i < y.length; i++) {
    // If a field is empty...
    if (y[i].value == "") {
      // add an "invalid" class to the field:
      y[i].className += " invalid";
      // and set the current valid status to false
      valid = false;
    }
  }
  // If the valid status is true, mark the step as finished and valid:
  if (valid) {
    document.getElementsByClassName("step")[currentTab].className += " finish";
  }
  return valid; // return the valid status
}

function fixStepIndicator(n) {
  // This function removes the "active" class of all steps...
  var i, x = document.getElementsByClassName("step");
  for (i = 0; i < x.length; i++) {
    x[i].className = x[i].className.replace(" active", "");
  }
  //... and adds the "active" class on the current step:
  x[n].className += " active";
}
idleTimer()
{% if checkCharging  %}
    setInterval("checkChargeStatus()",10000)
{% endif %}
</script>

</html>
